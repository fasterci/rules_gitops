common --enable_bzlmod --noincompatible_sandbox_hermetic_tmp
build --nolegacy_external_runfiles
build --remote_download_all
build --verbose_failures
build --@rules_go//go/config:pure
test --test_output=errors

common --incompatible_enable_proto_toolchain_resolution
# Ensure that we don't accidentally build protobuf or gRPC
common --per_file_copt=external/.*protobuf.*@--PROTOBUF_WAS_NOT_SUPPOSED_TO_BE_BUILT
common --host_per_file_copt=external/.*protobuf.*@--PROTOBUF_WAS_NOT_SUPPOSED_TO_BE_BUILT
common --per_file_copt=external/.*grpc.*@--GRPC_WAS_NOT_SUPPOSED_TO_BE_BUILT
common --host_per_file_copt=external/.*grpc.*@--GRPC_WAS_NOT_SUPPOSED_TO_BE_BUILT
